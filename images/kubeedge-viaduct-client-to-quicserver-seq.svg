<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="397px" preserveAspectRatio="none" style="width:468px;height:397px;background:#FFFFFF;" version="1.1" viewBox="0 0 468 397" width="468px" zoomAndPan="magnify"><defs><filter height="300%" id="f12sbidgzy51c8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f12sbidgzy51c8)" height="189.1738" style="stroke:#000000;stroke-width:2.0;" width="445.5" x="9" y="57.4883"/><rect fill="#FFFFFF" filter="url(#f12sbidgzy51c8)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="268.5" x="186" y="260.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="223" x2="223" y1="40.4883" y2="353.5938"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="414.5" x2="414.5" y1="40.4883" y2="353.5938"/><rect fill="#FEFECE" filter="url(#f12sbidgzy51c8)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="51" x="196" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="203" y="25.5352">client</text><rect fill="#FEFECE" filter="url(#f12sbidgzy51c8)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="51" x="196" y="352.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="203" y="373.1289">client</text><rect fill="#FEFECE" filter="url(#f12sbidgzy51c8)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="56" x="384.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="391.5" y="25.5352">server</text><rect fill="#FEFECE" filter="url(#f12sbidgzy51c8)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="56" x="384.5" y="352.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="391.5" y="373.1289">server</text><path d="M9,57.4883 L136,57.4883 L136,64.4883 L126,74.4883 L9,74.4883 L9,57.4883 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="189.1738" style="stroke:#000000;stroke-width:2.0;" width="445.5" x="9" y="57.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="24" y="71.0566">QUIC 0-RTT</text><polygon fill="#A80036" points="402.5,92.1094,412.5,96.1094,402.5,100.1094,406.5,96.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="223.5" x2="408.5" y1="96.1094" y2="96.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="230.5" y="91.3672">Client Hello</text><polygon fill="#0000FF" points="234.5,134.0752,224.5,138.0752,234.5,142.0752,230.5,138.0752" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="402.5,134.0752,412.5,138.0752,402.5,142.0752,406.5,138.0752" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="228.5" x2="408.5" y1="138.0752" y2="138.0752"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="240.5" y="133.333">Open control stream</text><path d="M19,109.1094 L19,149.1094 L214,149.1094 L214,119.1094 L204,109.1094 L19,109.1094 " fill="#FBFB77" filter="url(#f12sbidgzy51c8)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M204,109.1094 L204,119.1094 L214,119.1094 L204,109.1094 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="25" y="126.6777">control stream 是一个单独的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="25" y="141.9883">stream, 用于系统控制</text><polygon fill="#0000FF" points="402.5,176.041,412.5,180.041,402.5,184.041,406.5,180.041" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="223.5" x2="408.5" y1="180.041" y2="180.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="230.5" y="175.2988">Encrypted header message</text><polygon fill="#A80036" points="234.5,205.3516,224.5,209.3516,234.5,213.3516,230.5,209.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228.5" x2="413.5" y1="209.3516" y2="209.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="240.5" y="204.6094">Server Hello</text><polygon fill="#0000FF" points="234.5,234.6621,224.5,238.6621,234.5,242.6621,230.5,238.6621" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="228.5" x2="413.5" y1="238.6621" y2="238.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="240.5" y="233.9199">Encrypted ack message</text><path d="M186,260.6621 L342,260.6621 L342,267.6621 L332,277.6621 L186,277.6621 L186,260.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="268.5" x="186" y="260.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="201" y="274.2305">message stream</text><polygon fill="#A80036" points="402.5,295.2832,412.5,299.2832,402.5,303.2832,406.5,299.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="223.5" x2="408.5" y1="299.2832" y2="299.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="230.5" y="294.541">write message</text><polygon fill="#A80036" points="234.5,324.5938,224.5,328.5938,234.5,332.5938,230.5,328.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228.5" x2="413.5" y1="328.5938" y2="328.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="240.5" y="323.8516">response</text><!--MD5=[9dc843991ea95cf187ec349eb68ba933]
@startuml
group QUIC 0-RTT
client -> server: Client Hello
client <-[#0000ff]> server: Open control stream
note left
control stream 是一个单独的
stream, 用于系统控制
end note
client - -[#0000ff]> server: Encrypted header message
server -> client: Server Hello
server - -[#0000ff]> client: Encrypted ack message
end

group message stream
client -> server: write message
server -> client: response
end
@endum

PlantUML version 1.2021.16(Thu Dec 09 01:25:22 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
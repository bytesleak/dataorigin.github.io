<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="619px" preserveAspectRatio="none" style="width:576px;height:619px;background:#FFFFFF;" version="1.1" viewBox="0 0 576 619" width="576px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f7bi187jho06" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1f7bi187jho06)" height="501.9688" style="stroke:#000000;stroke-width:2.0;" width="552.5" x="10" y="57.4883"/><rect fill="#FFFFFF" filter="url(#f1f7bi187jho06)" height="277.7949" style="stroke:#000000;stroke-width:2.0;" width="522.5" x="30" y="81.7988"/><rect fill="#FFFFFF" filter="url(#f1f7bi187jho06)" height="178.8633" style="stroke:#000000;stroke-width:2.0;" width="471.5" x="20" y="373.5938"/><rect fill="#FFFFFF" filter="url(#f1f7bi187jho06)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="30" y="469.5254"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="67" x2="67" y1="40.4883" y2="576.457"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="233.5" x2="233.5" y1="40.4883" y2="576.457"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="384.5" x2="384.5" y1="40.4883" y2="576.457"/><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="51" x="40" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="47" y="25.5352">client</text><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="51" x="40" y="575.457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="47" y="595.9922">client</text><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="56" x="203.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="210.5" y="25.5352">server</text><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="56" x="203.5" y="575.457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="210.5" y="595.9922">server</text><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="90" x="337.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="344.5" y="25.5352">connection</text><rect fill="#FEFECE" filter="url(#f1f7bi187jho06)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="90" x="337.5" y="575.457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="344.5" y="595.9922">connection</text><path d="M10,57.4883 L206,57.4883 L206,64.4883 L196,74.4883 L10,74.4883 L10,57.4883 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="501.9688" style="stroke:#000000;stroke-width:2.0;" width="552.5" x="10" y="57.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151" x="25" y="71.0566">go loop handleSession</text><path d="M30,81.7988 L173,81.7988 L173,88.7988 L163,98.7988 L30,98.7988 L30,81.7988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="277.7949" style="stroke:#000000;stroke-width:2.0;" width="522.5" x="30" y="81.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98" x="45" y="95.3672">control stream</text><polygon fill="#A80036" points="221.5,116.4199,231.5,120.4199,221.5,124.4199,225.5,120.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67.5" x2="227.5" y1="120.4199" y2="120.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="74.5" y="115.6777">control stream</text><line style="stroke:#A80036;stroke-width:1.0;" x1="233.5" x2="275.5" y1="149.7305" y2="149.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="275.5" x2="275.5" y1="149.7305" y2="162.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234.5" x2="275.5" y1="162.7305" y2="162.7305"/><polygon fill="#A80036" points="244.5,158.7305,234.5,162.7305,244.5,166.7305,240.5,162.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="240.5" y="144.9883">accept control stream</text><polygon fill="#A80036" points="221.5,188.041,231.5,192.041,221.5,196.041,225.5,192.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67.5" x2="227.5" y1="192.041" y2="192.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="74.5" y="187.2988">send header message</text><polygon fill="#A80036" points="78.5,217.3516,68.5,221.3516,78.5,225.3516,74.5,221.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72.5" x2="232.5" y1="221.3516" y2="221.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="84.5" y="216.6094">response ack message</text><polygon fill="#A80036" points="372.5,246.6621,382.5,250.6621,372.5,254.6621,376.5,250.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="233.5" x2="378.5" y1="250.6621" y2="250.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="240.5" y="245.9199">new connection</text><line style="stroke:#A80036;stroke-width:1.0;" x1="384.5" x2="426.5" y1="279.9727" y2="279.9727"/><line style="stroke:#A80036;stroke-width:1.0;" x1="426.5" x2="426.5" y1="279.9727" y2="292.9727"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385.5" x2="426.5" y1="292.9727" y2="292.9727"/><polygon fill="#A80036" points="395.5,288.9727,385.5,292.9727,395.5,296.9727,391.5,292.9727" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="391.5" y="275.2305">go serve control stream</text><polygon fill="#A80036" points="372.5,318.2832,382.5,322.2832,372.5,326.2832,376.5,322.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="67.5" x2="378.5" y1="322.2832" y2="322.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="74.5" y="317.541">ping message</text><polygon fill="#A80036" points="78.5,347.5938,68.5,351.5938,78.5,355.5938,74.5,351.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72.5" x2="383.5" y1="351.5938" y2="351.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="84.5" y="346.8516">pong message</text><path d="M20,373.5938 L185,373.5938 L185,380.5938 L175,390.5938 L20,390.5938 L20,373.5938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="178.8633" style="stroke:#000000;stroke-width:2.0;" width="471.5" x="20" y="373.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="35" y="387.1621">loop serveSession</text><polygon fill="#A80036" points="372.5,408.2148,382.5,412.2148,372.5,416.2148,376.5,412.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67.5" x2="378.5" y1="412.2148" y2="412.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="74.5" y="407.4727">message stream</text><line style="stroke:#A80036;stroke-width:1.0;" x1="384.5" x2="426.5" y1="441.5254" y2="441.5254"/><line style="stroke:#A80036;stroke-width:1.0;" x1="426.5" x2="426.5" y1="441.5254" y2="454.5254"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385.5" x2="426.5" y1="454.5254" y2="454.5254"/><polygon fill="#A80036" points="395.5,450.5254,385.5,454.5254,395.5,458.5254,391.5,454.5254" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="391.5" y="436.7832">accept stream</text><path d="M30,469.5254 L235,469.5254 L235,476.5254 L225,486.5254 L30,486.5254 L30,469.5254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="30" y="469.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="160" x="45" y="483.0938">go loop handleMessage</text><polygon fill="#A80036" points="372.5,504.1465,382.5,508.1465,372.5,512.1465,376.5,508.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67.5" x2="378.5" y1="508.1465" y2="508.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="74.5" y="503.4043">send message</text><polygon fill="#A80036" points="78.5,533.457,68.5,537.457,78.5,541.457,74.5,537.457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72.5" x2="383.5" y1="537.457" y2="537.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="84.5" y="532.7148">response message</text><!--MD5=[2c84c845cb04090ea3ea272352fcb5ce]
@startuml

group go loop handleSession
group control stream
client -> server: control stream
server -> server: accept control stream
client -> server: send header message
server -> client: response ack message
server -> connection: new connection
connection -> connection: go serve control stream

client - -> connection: ping message
connection - -> client: pong message

end

group loop serveSession
client -> connection: message stream
connection -> connection: accept stream

group  go loop handleMessage
client -> connection: send message
connection -> client: response message
end
end
end

@enduml

PlantUML version 1.2021.16(Thu Dec 09 01:25:22 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>